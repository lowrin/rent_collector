{% extends "blocks/base.html" %}

{% block head %}
{{ block.super }}
{% endblock %}


{% block header %}
{{ block.super }}
{% endblock %}

{% block main %}
<main>
    <div class="container">
        <div class="section">
            <div class="row">
                <div class="col s12">
                    <h2>Alerts</h2>
                    <a class="waves-effect waves-light btn" href="{% url 'stocks:new_alert' %}">New Alert</a>
                </div>
                <div class="col s12">
                    <h3></h3>

                    <div class="collections-block">
                        <ul class="collection with-header">
                            <li class="collection-header">My Alerts</li>
                        {% for alert in alerts %}
                            <li class="collection-item"><a href="{% url 'stocks:alert' alert.id %}">{{ alert.id}} - {{ alert.name}}</a></li>
                        {% endfor %}

                        </ul>
                    </div>
                </div>
            </div>

        </div>
        <br><br>
    </div>
</main>
{% endblock %}


{% block footer %}
{{ block.super }}
{% endblock %}


{% block end_body %}
{{ block.super }}

<script>

function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}

if (getQueryVariable("saved") == "yes") {
M.toast({html: 'Der Alert wurde gespeichert.'})
}

window.history.replaceState({}, document.title, "/" );

</script>

{% endblock %}
